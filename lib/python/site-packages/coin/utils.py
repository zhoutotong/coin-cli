# -*- coding: utf-8 -*-
#！/bin/env python3
import os
import platform
import subprocess

# log out info message, color with green
def info(msg):
    print(f"\033[32m{msg}\033[0m")
    
# log out error message, color with red
def error(msg):
    print(f"\033[31m{msg}\033[0m")
    
# log out warn message, color with yellow
def warn(msg):
    print(f"\033[33m{msg}\033[0m")
    
def os_tag():
    lsb = platform.freedesktop_os_release()
    tag = '{}{}_{}'.format(lsb['NAME'], lsb['VERSION_ID'], platform.machine())
    return tag

def exec_proc(cmd):
    
    if is_root():
        cmd = cmd.replace('@sudo', '')
    else:
        cmd = cmd.replace('@sudo', 'sudo')
    # remove space of the head of the command
    cmd = cmd.lstrip()
    # try:
    ret = subprocess.run(cmd, shell=True, check=True, capture_output=False)
    info(ret)
#     except subprocess.CalledProcessError as e:
#         # error(f'failed to execute command: {cmd}, stdout: {e.stdout.decode('utf-8')} error: {e.stderr.decode('utf-8')}')
#         error_report = '''>>command:
# ---
# {}

# >>stdout:
# ---
# {}

# >>stderr:
# ---
# {}'''.format(cmd, e.stdout.decode('utf-8'), e.stderr.decode('utf-8'))
#         error(error_report)
#         return False
    
def is_root():
    return os.getuid() == 0
